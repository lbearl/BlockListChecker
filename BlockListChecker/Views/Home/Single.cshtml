@model BlockListChecker.ViewModels.SingleEmailViewModel
@{
    ViewBag.Title = @Model.EmailAddress;
}

<h2>Suppressions for '@Model.EmailAddress'</h2>

<div id="jsGrid"></div>

@* Now actually setup the grid *@
<script type="text/javascript">

    $("#jsGrid").jsGrid({
        width: "100%",
        height: "400px",

        inserting: false,
        editing: false,
        sorting: true,
        paging: true,
        autoload: true,

        controller: {
            loadData: function () {
                var d = $.Deferred();

                $.ajax({
                    url: "/Check/GetSuppressions/@Model.EmailAddress",
                    dataType: "json"
                }).done(function (response) {
                    d.resolve(response.value);
                });

                return d.promise();
            }
        },

        fields: [
            { name: "Email Provider", type: "text", width: 150},
            { name: "Email Address", type: "text", width: 150 },
            { name: "Added On", type: "datetime", width: 200 },
            { name: "Error Code", type: "text", width: 75 },
            { name: "Error Text", type: "text", width: 270 },
            { type: "control" }
        ]
    });
</script>
